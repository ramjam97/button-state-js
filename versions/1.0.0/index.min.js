/*!
 * ButtonStateJS v1.0.0
 * Description: A lightweight, dependency-free JavaScript utility for managing button UI states — loading, disabled, and visibility — with fully customizable behavior and class handling.
 * Author: Ram Jam
 * GitHub: https://github.com/ramjam97/button-state-js
 * License: ISC
 * Build Date: 2025-10-21 10:04:27 (Asia/Manila)
*/
function ButtonState(t="",e={}){const l={state:{loading:!1,disabled:!1,display:!0,...o(e,"state",{})},loading:{class:o(e,"loading.class","loading"),html:o(e,"loading.html",null),icon:o(e,"loading.icon","")},disabled:{class:o(e,"disabled.class","disabled")},display:{show:{class:o(e,"display.show.class","show")},hide:{class:o(e,"display.hide.class","hide")}},onChange:o(e,"onChange",null)},n=function(){if(!t)return[];if(t instanceof HTMLElement)return[t];if("string"==typeof t)return[...document.querySelectorAll(t)];if(Array.isArray(t))return t.flatMap(t=>t instanceof HTMLElement?[t]:"string"==typeof t?[...document.querySelectorAll(t)]:[]);return[]}(),a=n.map(t=>({dom:t,defaultText:t.textContent,defaultHtml:t.innerHTML,defaultDisplay:getComputedStyle(t).display})),s={loading:"loading"in l.state&&l.state.loading,disabled:"disabled"in l.state&&l.state.disabled,display:!("display"in l.state)||l.state.display},i={dom:n,target:a,state:s,setState:c,refresh:d,loading:function(t=!0){const e=Boolean(t);return c({loading:e,disabled:e})},disabled:function(t=!0){return c({disabled:Boolean(t)})},show:function(t=!0){return c({display:Boolean(t)})},hide:function(t=!0){return c({display:!Boolean(t)})}};function o(t,e,l=null){return t&&"object"==typeof t?e.split(".").reduce((t,e)=>t&&e in t?t[e]:void 0,t)??l:l}function d(t=!1){a.forEach(t=>{const e=t.dom;if(!document.body.contains(e))return;let n="function"==typeof l.loading.html?l.loading.html(t.defaultHtml):l.loading.html;null===n&&(n=t.defaultHtml),l.loading.icon&&(n=`${n}${l.loading.icon}`),e.innerHTML=s.loading?n:t.defaultHtml,e.disabled=s.disabled,e.style.display=s.display?"none"===t.defaultDisplay?"":t.defaultDisplay:"none",e.classList.toggle(l.loading.class,s.loading),e.classList.toggle(l.disabled.class,s.disabled),e.classList.toggle(l.display.show.class,s.display),e.classList.toggle(l.display.hide.class,!s.display)}),t&&"function"==typeof l.onChange&&l.onChange(s,n)}const r=(t,e)=>{if(t===e)return!0;if(null==t||null==e||typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((t,l)=>r(t,e[l]));if("object"==typeof t){const l=Object.keys(t),n=Object.keys(e);return l.length===n.length&&l.every(l=>r(t[l],e[l]))}return!1};function c(t={}){if(!t||"object"!=typeof t)return i;const e={...s};Object.assign(s,t);return d(!r(e,s)),i}return i}